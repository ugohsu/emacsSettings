# 展開したい行のうえにカーソルを置いて、
#
# C-i もしくは [TAB] 
#
# を押すと展開する。
#
# [SHIFT] + [TAB] ですべてのコマンドを展開もしくは折り畳む

* 基本操作
** 起動や終了
  - ovi-mode の起動
    - "jk" の同時押し
  - 挿入 (通常) モードへ
    - "i"
  - view-mode の起動・終了
    - "fd"
  - kill-buffer
    - "Q"
  - switch-to-buffer
    - "z"
  - buffer menu
    - "Z"

** ページ送り
  - 1 ページ進む
    - [SPC]
  - 1 ページ戻る
    - [S-SPC]
  - 1 行進む
    - [ALT-j]
  - 1 行戻る
    - [ALT-k]
  - 現在のカーソルをウィンドウの中央にする
    - [Ctrl-l]
  - 隣のウィンドウを 1 ページ進む
    - [ALT-n]
  - 隣のウィンドウを 1 ページ戻る
    - [ALT-p]

* カーソル移動
** 十字移動
  - ← (左へ 1 文字移動)
    - "h"
  - ↓ (下へ 1 文字移動)
    - "j"
  - ↑ (上へ 1 文字移動)
    - "k"
  - → (右へ 1 文字移動)
    - "l"

** 単語単位の移動
  - 単語 1 つ分進む (次の単語の先頭まで)
    - "w"
  - 単語 1 つ分進む (現在の単語の末尾まで)
    - "e"
  - 単語 1 つ分戻る
    - "b"

** 単語単位の移動 (単語の境界はスペース・タブ・改行のみ)
  - 単語 1 つ分進む (次の単語の先頭まで)
    - "W"
  - 単語 1 つ分進む (現在の単語の末尾まで)
    - "E"
  - 単語 1 つ分戻る
    - "B"

** 行単位の移動
  - 行頭へ
    - "0"
  - 先頭の空白を除く行頭へ
    - "^"
  - 行末へ
    - "$"

** 文字検索移動 (行単位)
  - [文字] に対話的にとぶ (接頭語がつく場合、次の [文字] までとぶ)
    - "f" [文字]
  - 全画面の [文字] に対話的にとぶ (接頭語がつく場合、前の [文字] までとぶ)
    - "F"
  - 次の [文字] の 1 つ前までとぶ
    - "t" [文字]
  - 前の [文字] の 1 つ前までとぶ
    - "T" [文字]
  - "f", "F", "t", "T" を繰り返す
    - ";"

** 行指定移動
  - バッファの先頭へ
    - "gg"
  - バッファの末尾へ
    - "G"
  - バッファの [数字] 行目へ
    - [数字] "gg"

** 画面移動
  - 画面のトップへ
    - "H"
  - 画面のボトムへ
    - "L"

** 対応する括弧への移動
  - 対応する括弧がハイライトされる状態で "%"

** センテンス移動
  - 文頭へ
    - "("
  - 文末へ
    - ")"

** パラグラフ単位の移動
  - バラグラフの先頭へ
    - "{"
  - バラグラフの末尾へ
    - "}"

** ポイント
  - 直前のポイントに戻る
    - ","
  - 現在のポイントをレジスタに記憶する
    - "m"
  - レジスタに記憶されているポイントにジャンプする
    - "'"
  - ポイントとマークの入れ替え
    - (範囲選択中に) "o"

** i- motion a- motion (visual モードもしくは接頭語がある場合のみ)
  - iw
    - inner word
  - iW
    - inner word (単語の境界はスペース・タブ・改行のみ)
  - is
    - inner sentence
  - ip
    - inner paragraph
  - i"
    - inner ""
  - ib
    - inner () {} []
  - aw
    - a word
  - aW
    - a word (単語の境界はスペース・タブ・改行のみ)
  - as
    - a sentence
  - ap
    - a paragraph
  - a"
    - a ""
  - ab
    - a () {} []

* デリート、バックスペース、1 文字置換
** デリート、バックスペース 
  - デリート
    - "x"
  - バックスペース
    - "X"
  - 1 文字置換
    - "r"

** デリート後に ovi を抜ける
  - 1 文字デリート後に ovi を抜ける
    - "s"
  - 行をデリート後に ovi を抜ける
    - "S"

* コピー、切り取り、切り取り後に ovi を抜ける、貼り付け
** コピー
  - 現在のポイントから行末までコピー
    - "Y"
  - 現在行をコピー
    - "yy"
  - 現在のポイントから [カーソル移動] までをコピー
    - "y" [カーソル移動]
    ex) 単語の先頭で "ye" をすることにより、単語をコピー
    ex) 単語の末尾で "3yb" をすることにより、前方 3 単語をコピー
  - 選択範囲のコピー
    - 範囲選択中に "y"

** 切り取り
  - 現在のポイントから行末まで切り取り
    - "D"
  - 現在行を切り取り
    - "dd"
  - 現在のポイントから [カーソル移動] までを切り取り
    - "d" [カーソル移動]
    ex) 単語の先頭で "de" をすることにより、単語を切り取り
    ex) 単語の末尾で "3db" をすることにより、前方 3 単語を切り取り
  - 選択範囲の切り取り
    - 範囲選択中に "d"

** 切り取り後に ovi を抜ける
  - 現在のポイントから行末まで切り取り、ovi を抜ける (以下略)
    - "C"
  - 現在行を切り取り
    - "cc"
  - 現在のポイントから [カーソル移動] までを切り取り
    - "c" [カーソル移動]
    ex) 単語の先頭で "ce" をすることにより、単語を切り取り
    ex) 単語の末尾で "3cb" をすることにより、前方 3 単語を切り取り
  - 選択範囲の切り取りと ovi を抜ける
    - 範囲選択中に "c"

** 貼り付け
  - 貼り付け
    - "p"
  - キルリングをさかのぼって貼り付け
    - 直前のコマンドが paste である状態で "P"
  - 現在行の下に貼り付け
    - "gp"
  - 現在行の上に貼り付け
    - "gP"
  - 矩形選択の貼り付け
    - "Rp"

* 範囲選択
  - 通常の選択を開始する
    - "v"
  - 現在のカーソルがある行を選択する
    - "V"
  - 矩形選択を開始する
    - "C-v"

* 検索
  - isearch-forward
    - "/"
  - isearch-backward
    - "?"
  - 文字マッチによる移動 (osu-jump-char-mode)
    - "f"
  - 行検索 (osu-jump-line-mode)
    - "n"
  - 全画面の行検索 (osu-jump-line-mode)
    - "N"
  - occur (正規表現による検索)
    - "\"
  - 正規表現による対話的置換
    - "_"

* その他コマンド
** インデント
  - 1 行インデント / 選択範囲のインデント
    - "="
  - rigidly インデント (左右シフト)
    - ">", "<"

** undo
  - 通常の undo
    - "u"
  - 通常の redo
    - "\C-r"
  - undo tree
    - "U"

** キーボードクイット (C-g と同等)
  - "K"

** join line
  - 現在の行と下の行をくっつける
    - "J"
  - 現在の行と下の行をくっつける (空白なし)
    - "gJ"

* ovi を抜けるコマンド一覧
  - 通常のコマンド
    - "i"
  - 1 文字進んで ovi を抜ける
    - "a"
  - 空白を除く行頭に移動し ovi を抜ける
    - "I"
  - 行頭に移動し ovi を抜ける
    - "gI"
  - 行末に移動し ovi を抜ける
    - "A"
  - 現在の行の下で ovi を抜ける
    - "o"
  - 現在の行の上で ovi を抜ける
    - "O"
  - カーソル位置の文字を消して ovi を抜ける
    - "s"
  - カーソル位置の行を消して ovi を抜ける
    - "S"
  - 現在のポイントから行末まで切り取り、ovi を抜ける
    - "C"
  - 現在行を切り取り、ovi を抜ける
    - "cc"
  - 現在のポイントから [カーソル移動] までを切り取り、ovi を抜ける
    - "c" [カーソル移動]
    ex) 単語の先頭で "ce" をすることにより、単語を切り取り
    ex) 単語の末尾で "3cb" をすることにより、前方 3 単語を切り取り
  - 選択範囲の切り取りと ovi を抜ける
    - 範囲選択中に "c"

* ドットコマンド
** 直前の (バッファに変更を加えた) コマンドを実行
  - "."
  ex) "de" (単語削除) の後に "." "." と入力すると、3 単語削除する。
  
      Emacs is better than Vim.
      ^
      
      ↑カーソルがここ (^) にある状態で、"3de"
      
       than Vim.
      ^
      
      とするのと、"de.."
      
       than Vim.
      ^
      
      とするのとは同じ結果。
      
  ex) 文字入力を複数回挿入する。
      
      Emacs is better than
      I will learn

      上のような文章の行末に Vim という文字列を挿入したい場合、

      Emacs is better than Vim.
                               ^
      I will learn

      最初の行には普通に入力した後、2 行目の行末

      Emacs is better than Vim.
      I will learn
                  ^
                  
      で "." を入力すると、

      Emacs is better than Vim.
      I will learn Vim.

      となる。
